#### 剑指offer 37 序列化二叉树

----

这题就是一个对二叉树结构的列表化再根据列表信息返回二叉树结构的过程

**最简单的做法就是直接输出...很不讲武德**

正常的做法是：bfs

- 首先序列化：
  - 序列化一个二叉树是标准的bfs过程，首先将根结点放入到队列中，然后每次弹出一个值，将其压入序列的同时，把左右孩子压入到队列，一直循环直到队列为空
- 反序列化：
  - 其实也是bfs
  - 这里的队列依然存储的是结点，每次弹出一个结点的时候，从序列中获取这个结点的左右两个孩子的值用来实例化结点压入到队列中。



```python
# Definition for a binary tree node.
# class TreeNode(object):
#     def __init__(self, x):
#         self.val = x
#         self.left = None
#         self.right = None

class Codec:

    def serialize(self, root):
        """Encodes a tree to a single string.
        
        :type root: TreeNode
        :rtype: str
        """
        if not root:
            return []
        self.q  = []
        self.ans = []
        def bfs(root):
            if not root:
                self.ans.append(root)
                return 
            else:
                self.q.append(root.left)
                self.q.append(root.right)
                self.ans.append(root.val)
                while(len(self.q) != 0):
                    bfs(self.q.pop(0))
        bfs(root)
        
        for index,item in enumerate(self.ans[::-1]):
            if item!=None:
                tmp = index
                break
        # print(self.ans[:-tmp])
        
        return self.ans[:-tmp]
            

    def deserialize(self, data):
        """Decodes your encoded data to tree.
        
        :type data: str
        :rtype: TreeNode
        """
        if not data:
            return
        self.q = []
        root = TreeNode(data.pop(0))
        self.q.append(root)
        while(self.q and data):
            node = self.q.pop(0)
            if data[0] != None:
                node.left = TreeNode(data.pop(0))
                self.q.append(node.left)
            else:
                x = data.pop(0)
            if not data:
                break
            if data[0] != None:
                node.right = TreeNode(data.pop(0))
                self.q.append(node.right)
            else:
                x = data.pop(0)

        return root
        

# Your Codec object will be instantiated and called as such:
# codec = Codec()
# codec.deserialize(codec.serialize(root)
```

