### leetcode 122

---

**买卖股票的最佳时机 2**

给定一个数组，它的第 i 个元素是一支给定股票第 i 天的价格。

设计一个算法来计算你所能获取的最大利润。你可以尽可能地完成更多的交易（多次买卖一支股票）。

注意：你不能同时参与多笔交易（你必须在再次购买前出售掉之前的股票）。

---

- 因为是最大利润问题，所以我们考虑使用dp求解。
  - 最优子结构同之前一样，但是我们发现如果仅仅使用dp[i]来表示第i天的最大收益，无法满足所有的状态，因为我们无法满足无后效性。所以我们设置状态dp[i] [0] 表示第i天如果手上不持有股票的最大收益，dp[i] [1]表示第i天如果手上持有股票的最大收益。这样的话，我们可以通过dp[i] [0] 和 dp[i] [1]建立有向无环图，所以可以得到最终的最优解
  - 无后效性可以得到解决。

- 动态转移方程，我们首先要考虑一共有多少个可能转移，一个是dp[i] [0] ,一个是dp[i] [1], 两个分别由 max(dp[i-1] [0], dp[i-1] [1] + prices[i]) 和max(dp[i-1] [1], dp[i-1] [0] - prices[i])我们最终要得到的是dp[n-1] [0]。

  

  ```python
  class Solution:
      def maxProfit(self, prices: List[int]) -> int:
          n = len(prices)
          dp = [0] * n
  
          for i in range(n):
              dp[i] = [0] * 2
          
          dp[0][0] = 0
          dp[0][1] = 0 - prices[0]
          for i in range(1,n):
              dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])
              dp[i][1] = max(dp[i-1][0] - prices[i], dp[i-1][1])
          return dp[n-1][0]
  ```

  